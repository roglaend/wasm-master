<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: Paxos Architecture Pages: 1 -->
<svg width="6000pt" height="4066pt"
 viewBox="0.00 0.00 1440.00 975.79" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(0.35 0.35) rotate(0) translate(4 1438)">
<title>Paxos Architecture</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-1438 2124,-1438 2124,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_host</title>
<polygon fill="lightgray" stroke="lightgray" points="8,-8 8,-1073 1552,-1073 1552,-8 8,-8"/>
<text text-anchor="middle" x="780" y="-1057.8" font-family="Times,serif" font-size="14.00">Rust Host (Wasmtime)</text>
<text text-anchor="middle" x="780" y="-1042.8" font-family="Times,serif" font-size="14.00">Runs Paxos&#45;Coordinator &amp; gRPC</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_paxos</title>
<polygon fill="lightgreen" stroke="lightgreen" points="312,-16 312,-1027 1012,-1027 1012,-16 312,-16"/>
<text text-anchor="middle" x="662" y="-1011.8" font-family="Times,serif" font-size="14.00">Paxos&#45;Coordinator (WASM)</text>
<text text-anchor="middle" x="662" y="-996.8" font-family="Times,serif" font-size="14.00">Handles Paxos Algorithm</text>
</g>
<!-- proposer -->
<g id="node1" class="node">
<title>proposer</title>
<polygon fill="lightblue" stroke="black" points="536,-981 320,-981 320,-909 536,-909 536,-981"/>
<text text-anchor="middle" x="428" y="-948.4" font-family="Times,serif" font-size="12.00">Proposer (WASM)</text>
<text text-anchor="middle" x="428" y="-935.4" font-family="Times,serif" font-size="12.00">Initiates Paxos rounds</text>
</g>
<!-- learner -->
<g id="node3" class="node">
<title>learner</title>
<polygon fill="lightblue" stroke="black" points="888,-535 672,-535 672,-463 888,-463 888,-535"/>
<text text-anchor="middle" x="780" y="-502.4" font-family="Times,serif" font-size="12.00">Learner (WASM)</text>
<text text-anchor="middle" x="780" y="-489.4" font-family="Times,serif" font-size="12.00">Learns final value</text>
</g>
<!-- proposer&#45;&gt;learner -->
<g id="edge16" class="edge">
<title>proposer&#45;&gt;learner</title>
<path fill="none" stroke="black" stroke-width="3" d="M455.92,-908.79C519.39,-828.72 674.47,-633.12 744.57,-544.69"/>
<polygon fill="black" stroke="black" stroke-width="3" points="747.92,-547.23 752.08,-535.21 741.34,-542.01 747.92,-547.23"/>
<text text-anchor="middle" x="544.24" y="-740.74" font-family="Times,serif" font-size="10.00">Phase 16:</text>
<text text-anchor="middle" x="544.24" y="-729.74" font-family="Times,serif" font-size="10.00">notify_learners(value)</text>
</g>
<!-- paxos_coordinator -->
<g id="node9" class="node">
<title>paxos_coordinator</title>
<ellipse fill="none" stroke="black" cx="1656" cy="-499" rx="95.58" ry="18"/>
<text text-anchor="middle" x="1656" y="-495.3" font-family="Times,serif" font-size="14.00">paxos_coordinator</text>
</g>
<!-- proposer&#45;&gt;paxos_coordinator -->
<g id="edge1" class="edge">
<title>proposer&#45;&gt;paxos_coordinator</title>
<path fill="none" stroke="black" stroke-width="3" d="M470.95,-908.97C663.04,-818.11 1334.03,-577.53 1577.37,-515.02"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1578.71,-519.01 1589.32,-512 1576.66,-510.86 1578.71,-519.01"/>
<text text-anchor="middle" x="959.16" y="-726" font-family="Times,serif" font-size="10.00">Phase 1:</text>
<text text-anchor="middle" x="959.16" y="-715" font-family="Times,serif" font-size="10.00">start_paxos_round(value)</text>
</g>
<!-- proposer&#45;&gt;paxos_coordinator -->
<g id="edge10" class="edge">
<title>proposer&#45;&gt;paxos_coordinator</title>
<path fill="none" stroke="black" stroke-width="3" d="M536.04,-921.14C813.38,-844.81 1492.5,-599.27 1637.53,-522.89"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1639.63,-526.53 1648.12,-517.07 1635.58,-519.17 1639.63,-526.53"/>
<text text-anchor="middle" x="1132.78" y="-736.02" font-family="Times,serif" font-size="10.00">Phase 10:</text>
<text text-anchor="middle" x="1132.78" y="-725.02" font-family="Times,serif" font-size="10.00">collect_promises()</text>
</g>
<!-- acceptor -->
<g id="node2" class="node">
<title>acceptor</title>
<polygon fill="lightblue" stroke="black" points="1004,-981 788,-981 788,-909 1004,-909 1004,-981"/>
<text text-anchor="middle" x="896" y="-948.4" font-family="Times,serif" font-size="12.00">Acceptor (WASM)</text>
<text text-anchor="middle" x="896" y="-935.4" font-family="Times,serif" font-size="12.00">Validates proposals</text>
</g>
<!-- acceptor&#45;&gt;paxos_coordinator -->
<g id="edge7" class="edge">
<title>acceptor&#45;&gt;paxos_coordinator</title>
<path fill="none" stroke="black" stroke-width="3" d="M902.23,-908.79C997.74,-818.88 1405.82,-583.28 1586.66,-517.36"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1588.06,-521.32 1597.97,-513.36 1585.26,-513.4 1588.06,-521.32"/>
<text text-anchor="middle" x="1171.94" y="-705.08" font-family="Times,serif" font-size="10.00">Phase 7:</text>
<text text-anchor="middle" x="1171.94" y="-694.08" font-family="Times,serif" font-size="10.00">handle_prepare() → Promise</text>
</g>
<!-- acceptor&#45;&gt;paxos_coordinator -->
<g id="edge13" class="edge">
<title>acceptor&#45;&gt;paxos_coordinator</title>
<path fill="none" stroke="black" stroke-width="3" d="M1004.22,-911.35C1205.84,-827.21 1586.2,-604.18 1658.14,-526.85"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1661.57,-529.29 1665.92,-517.34 1655.07,-523.97 1661.57,-529.29"/>
<text text-anchor="middle" x="1259.68" y="-733.1" font-family="Times,serif" font-size="10.00">Phase 13:</text>
<text text-anchor="middle" x="1259.68" y="-722.1" font-family="Times,serif" font-size="10.00">handle_accept() → Accepted</text>
</g>
<!-- kv_store -->
<g id="node4" class="node">
<title>kv_store</title>
<polygon fill="lightyellow" stroke="black" points="946,-96 730,-96 730,-24 946,-24 946,-96"/>
<text text-anchor="middle" x="838" y="-63.4" font-family="Times,serif" font-size="12.00">KV Store (WASM)</text>
<text text-anchor="middle" x="838" y="-50.4" font-family="Times,serif" font-size="12.00">Stores consensus data</text>
</g>
<!-- learner&#45;&gt;kv_store -->
<g id="edge17" class="edge">
<title>learner&#45;&gt;kv_store</title>
<path fill="none" stroke="black" stroke-width="3" d="M784.65,-462.98C795.01,-384.91 820.01,-196.56 831.73,-108.22"/>
<polygon fill="black" stroke="black" stroke-width="3" points="835.91,-108.64 833.33,-96.19 827.59,-107.53 835.91,-108.64"/>
<text text-anchor="middle" x="761.19" y="-299.6" font-family="Times,serif" font-size="10.00">Phase 17:</text>
<text text-anchor="middle" x="761.19" y="-288.6" font-family="Times,serif" font-size="10.00">store_value(value)</text>
</g>
<!-- kv_store&#45;&gt;paxos_coordinator -->
<g id="edge18" class="edge">
<title>kv_store&#45;&gt;paxos_coordinator</title>
<path fill="none" stroke="black" stroke-width="3" d="M903.62,-96.05C1065.74,-182.66 1481.69,-404.88 1614.54,-475.85"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1612.86,-479.72 1625.43,-481.67 1616.82,-472.31 1612.86,-479.72"/>
<text text-anchor="middle" x="1205.58" y="-299.95" font-family="Times,serif" font-size="10.00">Phase 18:</text>
<text text-anchor="middle" x="1205.58" y="-288.95" font-family="Times,serif" font-size="10.00">Consensus Reached!</text>
</g>
<!-- wasi_interface -->
<g id="node5" class="node">
<title>wasi_interface</title>
<polygon fill="orange" stroke="black" points="1544,-988 1256,-988 1256,-902 1544,-902 1544,-988"/>
<text text-anchor="middle" x="1400" y="-954.9" font-family="Times,serif" font-size="12.00">WASI Interface</text>
<text text-anchor="middle" x="1400" y="-941.9" font-family="Times,serif" font-size="12.00">(network.send_message())</text>
<text text-anchor="middle" x="1400" y="-928.9" font-family="Times,serif" font-size="12.00">Facilitates communication</text>
</g>
<!-- grpc_server -->
<g id="node6" class="node">
<title>grpc_server</title>
<polygon fill="gray" stroke="black" points="304,-542 16,-542 16,-456 304,-456 304,-542"/>
<text text-anchor="middle" x="160" y="-502.4" font-family="Times,serif" font-size="12.00">gRPC Client / Server (Rust)</text>
<text text-anchor="middle" x="160" y="-489.4" font-family="Times,serif" font-size="12.00">Handles Paxos messaging</text>
</g>
<!-- wasi_interface&#45;&gt;grpc_server -->
<g id="edge3" class="edge">
<title>wasi_interface&#45;&gt;grpc_server</title>
<path fill="none" stroke="black" stroke-width="3" d="M1282.51,-901.93C1049.54,-818.51 530.73,-632.74 288.81,-546.12"/>
<polygon fill="black" stroke="black" stroke-width="3" points="290.22,-542.17 277.51,-542.07 287.39,-550.07 290.22,-542.17"/>
<text text-anchor="middle" x="706.16" y="-738.03" font-family="Times,serif" font-size="10.00">Phase 3:</text>
<text text-anchor="middle" x="706.16" y="-727.03" font-family="Times,serif" font-size="10.00">send_paxos_message(Prepare)</text>
</g>
<!-- grpc_network -->
<g id="node7" class="node">
<title>grpc_network</title>
<ellipse fill="lightgray" stroke="black" cx="428" cy="-1391" rx="162" ry="43"/>
<text text-anchor="middle" x="428" y="-1394.4" font-family="Times,serif" font-size="12.00">gRPC Network</text>
<text text-anchor="middle" x="428" y="-1381.4" font-family="Times,serif" font-size="12.00">Relays Paxos messages</text>
</g>
<!-- grpc_server&#45;&gt;grpc_network -->
<g id="edge4" class="edge">
<title>grpc_server&#45;&gt;grpc_network</title>
<path fill="none" stroke="black" stroke-width="3" d="M166.54,-542.13C187.1,-674.46 249,-1073 249,-1073 249,-1073 347.63,-1247.66 398.46,-1337.69"/>
<polygon fill="black" stroke="black" stroke-width="3" points="394.86,-1339.85 404.41,-1348.23 402.17,-1335.72 394.86,-1339.85"/>
<text text-anchor="middle" x="169.1" y="-971.75" font-family="Times,serif" font-size="10.00">Phase 4:</text>
<text text-anchor="middle" x="169.1" y="-960.75" font-family="Times,serif" font-size="10.00">gRPC: Prepare Message</text>
</g>
<!-- grpc_network&#45;&gt;proposer -->
<g id="edge9" class="edge">
<title>grpc_network&#45;&gt;proposer</title>
<path fill="none" stroke="black" stroke-width="3" d="M371.34,-1350.6C322.1,-1268.39 320.91,-1079 367.8,-991.65"/>
<polygon fill="black" stroke="black" stroke-width="3" points="371.44,-993.74 373.92,-981.27 364.21,-989.48 371.44,-993.74"/>
<text text-anchor="middle" x="295.57" y="-1185.13" font-family="Times,serif" font-size="10.00">Phase 9:</text>
<text text-anchor="middle" x="295.57" y="-1174.13" font-family="Times,serif" font-size="10.00">Deliver Promise(proposal_id)</text>
</g>
<!-- grpc_network&#45;&gt;proposer -->
<g id="edge15" class="edge">
<title>grpc_network&#45;&gt;proposer</title>
<path fill="none" stroke="black" stroke-width="3" d="M484.66,-1350.6C533.9,-1268.39 535.09,-1079 488.2,-991.65"/>
<polygon fill="black" stroke="black" stroke-width="3" points="491.79,-989.48 482.08,-981.27 484.56,-993.74 491.79,-989.48"/>
<text text-anchor="middle" x="392.43" y="-1163.13" font-family="Times,serif" font-size="10.00">Phase 15:</text>
<text text-anchor="middle" x="392.43" y="-1152.13" font-family="Times,serif" font-size="10.00">Deliver Accepted(proposal_id, value)</text>
</g>
<!-- other_nodes -->
<g id="node8" class="node">
<title>other_nodes</title>
<polygon fill="lightgray" stroke="black" points="2120,-988 1796,-988 1796,-902 2120,-902 2120,-988"/>
<text text-anchor="middle" x="1958" y="-948.4" font-family="Times,serif" font-size="12.00">Other Paxos Nodes</text>
<text text-anchor="middle" x="1958" y="-935.4" font-family="Times,serif" font-size="12.00">(Same Architecture)</text>
</g>
<!-- grpc_network&#45;&gt;other_nodes -->
<g id="edge5" class="edge">
<title>grpc_network&#45;&gt;other_nodes</title>
<path fill="none" stroke="black" stroke-width="3" d="M502.87,-1352.7C755.43,-1268.91 1489,-1073 1489,-1073 1489,-1073 1644.12,-1015.56 1784.05,-977.94"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1785.29,-981.96 1795.81,-974.82 1783.14,-973.84 1785.29,-981.96"/>
<text text-anchor="middle" x="1071.05" y="-1184.56" font-family="Times,serif" font-size="10.00">Phase 5:</text>
<text text-anchor="middle" x="1071.05" y="-1173.56" font-family="Times,serif" font-size="10.00">Deliver Prepare(proposal_id)</text>
</g>
<!-- grpc_network&#45;&gt;other_nodes -->
<g id="edge12" class="edge">
<title>grpc_network&#45;&gt;other_nodes</title>
<path fill="none" stroke="black" stroke-width="3" d="M563.95,-1367.58C908.62,-1295.29 1741,-1073 1741,-1073 1741,-1073 1858.09,-1029.65 1930.31,-993.6"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1932.28,-997.31 1941.06,-988.11 1928.46,-989.83 1932.28,-997.31"/>
<text text-anchor="middle" x="1164.55" y="-1209.37" font-family="Times,serif" font-size="10.00">Phase 12:</text>
<text text-anchor="middle" x="1164.55" y="-1198.37" font-family="Times,serif" font-size="10.00">Deliver Accept(proposal_id, value)</text>
</g>
<!-- other_nodes&#45;&gt;paxos_coordinator -->
<g id="edge6" class="edge">
<title>other_nodes&#45;&gt;paxos_coordinator</title>
<path fill="none" stroke="black" stroke-width="3" d="M1929.32,-901.83C1867.99,-811.67 1725.56,-602.27 1674.57,-527.31"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1677.96,-524.81 1667.73,-517.25 1671.01,-529.54 1677.96,-524.81"/>
<text text-anchor="middle" x="1717.44" y="-728.57" font-family="Times,serif" font-size="10.00">Phase 6:</text>
<text text-anchor="middle" x="1717.44" y="-717.57" font-family="Times,serif" font-size="10.00">handle_paxos_message(Prepare)</text>
</g>
<!-- paxos_coordinator&#45;&gt;wasi_interface -->
<g id="edge2" class="edge">
<title>paxos_coordinator&#45;&gt;wasi_interface</title>
<path fill="none" stroke="black" stroke-width="3" d="M1571.42,-507.43C1312.79,-553.07 1139.14,-796.8 1246.33,-898.93"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1243.81,-902.3 1255.66,-906.91 1249.27,-895.92 1243.81,-902.3"/>
<text text-anchor="middle" x="1492.87" y="-717.18" font-family="Times,serif" font-size="10.00">Phase 2:</text>
<text text-anchor="middle" x="1492.87" y="-706.18" font-family="Times,serif" font-size="10.00">network.send_message(Prepare)</text>
</g>
<!-- paxos_coordinator&#45;&gt;wasi_interface -->
<g id="edge8" class="edge">
<title>paxos_coordinator&#45;&gt;wasi_interface</title>
<path fill="none" stroke="black" stroke-width="3" d="M1610.43,-514.91C1510.76,-573.25 1377.83,-787.87 1366.78,-889.7"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1362.57,-889.6 1366.04,-901.83 1370.96,-890.11 1362.57,-889.6"/>
<text text-anchor="middle" x="1404.1" y="-694.3" font-family="Times,serif" font-size="10.00">Phase 8:</text>
<text text-anchor="middle" x="1404.1" y="-683.3" font-family="Times,serif" font-size="10.00">network.send_message(Promise)</text>
</g>
<!-- paxos_coordinator&#45;&gt;wasi_interface -->
<g id="edge11" class="edge">
<title>paxos_coordinator&#45;&gt;wasi_interface</title>
<path fill="none" stroke="black" stroke-width="3" d="M1685.15,-516.38C1715.29,-577.6 1598.23,-794.48 1491.56,-893.74"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1488.69,-890.67 1482.59,-901.83 1494.31,-896.91 1488.69,-890.67"/>
<text text-anchor="middle" x="1669.35" y="-697.06" font-family="Times,serif" font-size="10.00">Phase 11:</text>
<text text-anchor="middle" x="1669.35" y="-686.06" font-family="Times,serif" font-size="10.00">network.send_message(Accept)</text>
</g>
<!-- paxos_coordinator&#45;&gt;wasi_interface -->
<g id="edge14" class="edge">
<title>paxos_coordinator&#45;&gt;wasi_interface</title>
<path fill="none" stroke="black" stroke-width="3" d="M1737.19,-508.64C1950.45,-560.69 1811.68,-833.17 1555.92,-918.46"/>
<polygon fill="black" stroke="black" stroke-width="3" points="1554.58,-914.47 1544.43,-922.13 1557.14,-922.47 1554.58,-914.47"/>
<text text-anchor="middle" x="1734.05" y="-705.55" font-family="Times,serif" font-size="10.00">Phase 14:</text>
<text text-anchor="middle" x="1734.05" y="-694.55" font-family="Times,serif" font-size="10.00">network.send_message(Accepted)</text>
</g>
</g>
</svg>
